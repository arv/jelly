{"version":3,"sources":["src/es6/jelly.js"],"names":[],"mappings":"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","file":"/src/jelly/jelly.js","sourcesContent":["'use strict';\n\nvar levels = [\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x      r     x',\n    'x      xx    x',\n    'x  g     r b x',\n    'xxbxxxg xxxxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x     g   g  x',\n    'x   r r   r  x',\n    'xxxxx x x xxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x   bg  x g  x',\n    'xxx xxxrxxx  x',\n    'x      b     x',\n    'xxx xxxrxxxxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x       r    x',\n    'x       b    x',\n    'x       x    x',\n    'x b r        x',\n    'x b r      b x',\n    'xxx x      xxx',\n    'xxxxx xxxxxxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x            x',\n    'xrg  gg      x',\n    'xxx xxxx xx  x',\n    'xrg          x',\n    'xxxxx  xx   xx',\n    'xxxxxx xx  xxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'xxxxxxx      x',\n    'xxxxxxx g    x',\n    'x       xx   x',\n    'x r   b      x',\n    'x x xxx x g  x',\n    'x         x bx',\n    'x       r xxxx',\n    'x   xxxxxxxxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x          r x',\n    'x          x x',\n    'x     b   b  x',\n    'x     x  rr  x',\n    'x         x  x',\n    'x R  Bx x x  x',\n    'x x  xx x x  x',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'xxx  x  x   xx',\n    'xx   g  b   xx',\n    'xx   x  x   xx',\n    'xx   B  G   xx',\n    'xxg        bxx',\n    'xxxg      bxxx',\n    'xxxx      xxxx',\n    'xxxxxxxxxxxxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x            x',\n    'x          rbx',\n    'x    x     xxx',\n    'xb        11xx',\n    'xx  Rx  x xxxx',\n    'xxxxxxxxxxxxxx', ],\n\n  [ 'xxxxxxxxxxxxxx',\n    'x   gr       x',\n    'x   11 2     x',\n    'x    x x     x',\n    'x            x',\n    'x  x  x      x',\n    'x        x  rx',\n    'xx   x     gxx',\n    'x          xxx',\n    'xxxxxxxxxxxxxx', ],\n\n];\n\nvar CELL_SIZE = 48;\n\nvar oldWebKit = !('animation' in document.documentElement.style);\nvar animation = oldWebKit ? 'webkitAnimation' : 'animation';\nvar animationName = oldWebKit ? 'webkitAnimationName' : 'animationName';\nvar animationEnd = oldWebKit ? 'webkitAnimationEnd' : 'animationend';\nvar transitionEnd = oldWebKit ? 'webkitTransitionEnd' : 'transitionend';\n\nfunction moveToCell(dom, x, y) {\n  dom.style.left = x * CELL_SIZE + 'px';\n  dom.style.top = y * CELL_SIZE + 'px';\n}\n\nfunction isJelly(object) {\n  return object instanceof Jelly;\n}\n\nfunction isFixed(kind) {\n  return 'RGB'.indexOf(kind) >= 0;\n}\n\nfunction getColor(kind) {\n  switch (kind) {\n    case 'r':\n    case 'R':\n      return 'red';\n    case 'g':\n    case 'G':\n      return 'green';\n    case 'b':\n    case 'B':\n      return 'blue';\n    case '1':\n    case '2':\n      return 'black';\n  }\n}\n\n\nclass Stage {\n  constructor(dom, map) {\n    this.dom = dom;\n\n    // Capture and swallow all click events during animations.\n    this.busy = false;\n\n    this.loadMap(map);\n  }\n\n  loadMap(map) {\n    this.undoStack = [];\n    this.jellies = [];\n    this.dom.textContent = '';\n\n    var table = document.createElement('table');\n    this.dom.appendChild(table);\n    this.cells = map.map((line, y) => {\n      var row = line.split('');\n      var tr = document.createElement('tr');\n      table.appendChild(tr);\n      return row.map((char, x) => {\n        if (row[x] === 'x') {\n          var wall = document.createElement('td');\n          wall.className = 'cell wall';\n          tr.appendChild(wall);\n          return wall;\n        }\n\n        var td = document.createElement('td');\n        td.className = 'transparent';\n        tr.appendChild(td);\n\n        if (row[x] !== ' ') {\n          var jelly = new Jelly(this, x, y, row[x]);\n          this.dom.appendChild(jelly.dom);\n          this.jellies.push(jelly);\n          return jelly;\n        }\n\n        return null;\n      });\n    });\n    this.addBorders();\n    this.addLocks();\n\n    this.checkForMerges();\n  }\n\n  addBorders() {\n    for (var y = 0; y < this.cells.length; y++) {\n      for (var x = 0; x < this.cells[0].length; x++) {\n        var cell = this.cells[y][x];\n        if (!cell || cell.tagName != 'TD')\n          continue;\n        var border = 'solid 1px #777';\n        var edges = [\n          ['borderBottom',  0,  1],\n          ['borderTop',     0, -1],\n          ['borderLeft',   -1,  0],\n          ['borderRight',   1,  0],\n        ];\n        for (var [attr, dx, dy] of edges) {\n          if (y + dy < 0 || y + dy >=  this.cells.length)\n            continue;\n          if (x + dx < 0 || x + dx >= this.cells[0].length)\n            continue;\n          var other = this.cells[y + dy][x + dx];\n          if (!other || other.tagName != 'TD')\n            cell.style[attr] = border;\n        }\n      }\n    }\n  }\n\n  addLocks() {\n    for (var jelly of this.jellies) {\n      if (jelly.isFixed)\n        jelly.addLock();\n    }\n  }\n\n  waitForAnimation(cb) {\n    var end = () => {\n      this.dom.removeEventListener(transitionEnd, end);\n      cb();\n    };\n    this.dom.addEventListener(transitionEnd, end);\n  }\n\n  trySlide(jelly, dir) {\n    if (!this.canMove(jelly, dir))\n      return;\n\n    this.saveState();\n\n    this.busy = true;\n    var jellies = this.getAdjacentObjects(jelly, dir).filter(isJelly);\n    jellies.reverse().forEach((jelly) => {\n      this.move(jelly, dir, 0);\n    });\n\n    this.waitForAnimation(() => {\n      this.checkFall(() => {\n        this.checkForMerges();\n        this.busy = false;\n      })\n    });\n  }\n\n  move(jelly, dx, dy) {\n    var targetX = jelly.x + dx;\n    var targetY = jelly.y + dy;\n    for (var [x, y] of jelly.cellCoords()) {\n      this.cells[y][x] = null;\n    }\n    jelly.updatePosition(targetX, targetY);\n    for (var [x, y] of jelly.cellCoords()) {\n      this.cells[y][x] = jelly;\n    }\n  }\n\n  isWallAt(x, y) {\n    return this.cells[y][x] != null && !isJelly(this.cells[y][x]);\n  }\n\n  checkFilled(jelly, dx, dy) {\n    for (var [x, y] of jelly.cellCoords()) {\n      var next = this.cells[y + dy][x + dx];\n      if (next && next != jelly)\n        return next;\n    }\n    return false;\n  }\n\n  canMove(jelly, dir) {\n    if (jelly.isFixed)\n      return false;\n    for (var object of this.getAdjacentObjects(jelly, dir)) {\n      // TODO: The wall should be objects too.\n      if (!isJelly(object) || object.isFixed)\n        return false;\n      // TODO: Check if jelly is fixed (needed for later levels)\n    }\n    return true;\n  }\n\n  /**\n   * Returns the jellies and walls that are touching in the given direction.\n   * Including the jelly passed as argument.\n   */\n  getAdjacentObjects(jelly, dir) {\n    // ES6 has Set but Traceur does not provide a polyfill at this time.\n    var found = [];\n\n    var inner = (jelly) => {\n      found.push(jelly);\n      for (var [x, y] of jelly.cellCoords()) {\n        var next = this.cells[y][x + dir];\n        if (next && next != jelly && found.indexOf(next) == -1) {\n          if (isJelly(next))\n            inner(next);\n          else  // wall\n            found.push(next);\n        }\n      }\n    };\n\n    inner(jelly);\n    return found;\n  }\n\n  checkFall(cb) {\n    var moved = false;\n    var didOneMove = true;\n    while (didOneMove) {\n      didOneMove = false;\n      for (var jelly of this.jellies) {\n        if (!jelly.isFixed && !this.checkFilled(jelly, 0, 1)) {\n          this.move(jelly, 0, 1);\n          moved = true;\n          didOneMove = true;\n        }\n      }\n    }\n    if (moved)\n      this.waitForAnimation(cb);\n    else\n      cb();\n  }\n\n  checkForMerges() {\n    var jelly;\n    while (jelly = this.doOneMerge()) {\n      for (var [x, y] of jelly.cellCoords()) {\n        this.cells[y][x] = jelly;\n      }\n    }\n    this.checkForCompletion();\n  }\n\n  get done() {\n    return this._done;\n  }\n\n  checkForCompletion() {\n    var kinds = {};\n    for (var jelly of this.jellies) {\n      kinds[jelly.kind] = true;\n    }\n\n    var done = Object.keys(kinds).length === this.jellies.length;\n    if (done != this._done) {\n      this._done = done;\n      if (this.onDoneChange)\n        this.onDoneChange();\n    }\n  }\n\n  doOneMerge() {\n    for (var jelly of this.jellies) {\n      for (var [x, y] of jelly.cellCoords()) {\n        // Only look right and down; left and up are handled by that side\n        // itself looking right and down.\n        for (var [dx, dy] of [[1, 0], [0, 1]]) {\n          var other = this.cells[y + dy][x + dx]\n          if (!other || !isJelly(other))\n            continue;\n          if (other == jelly)\n            continue;\n          if (jelly.kind != other.kind)\n            continue;\n          jelly.merge(other);\n          this.jellies = this.jellies.filter((j) => j != other);\n          return jelly;\n        }\n      }\n    }\n    return null;\n  }\n\n  saveState() {\n    var rows = [];\n    for (var row of this.cells) {\n      var s = '';\n      for (var cell of row) {\n        if (isJelly(cell))\n          s += cell.kind;\n        else if (cell)\n          s += 'x';\n        else\n          s += ' ';\n      }\n      rows.push(s);\n    }\n    this.undoStack.push(rows);\n  }\n\n  get canUndo() {\n    return this.undoStack.length > 0;\n  }\n\n  undo() {\n    var state = this.undoStack.pop();\n    if (!state)\n      return;\n    var undoStack = this.undoStack;\n    this.loadMap(state);\n    this.undoStack = undoStack;\n  }\n\n  reset() {\n    var state = this.undoStack[0];\n    if (!state)\n      return;\n    this.loadMap(state);\n  }\n}\n\nclass JellyCell {\n  constructor(jelly, x, y, color) {\n    this.jelly = jelly;\n    this.x = x;\n    this.y = y;\n    this.dom = document.createElement('div');\n    this.dom.className = 'cell jelly ' + color;\n  }\n}\n\nclass Jelly {\n  constructor(stage, x, y, kind) {\n    this.stage = stage;\n    this.x = x;\n    this.y = y;\n    var color = getColor(kind);\n    this.isFixed = isFixed(kind);\n    this.kind = kind.toLowerCase();\n    this.dom = document.createElement('div');\n    this.updatePosition(this.x, this.y);\n    this.dom.className = 'cell jellybox';\n\n    var cell = new JellyCell(this, 0, 0, color);\n    this.dom.appendChild(cell.dom);\n    this.cells = [cell];\n\n    this.dom.addEventListener('pointerdown', (e) => {\n      var pointerId = e.pointerId;\n      var startX = e.clientX;\n\n      var move = (e) => {\n        e.preventDefault();\n        if (e.pointerId !== pointerId)\n          return;\n\n        var distance = Math.abs(e.clientX - startX);\n        if (this.stage.busy || distance < 24)\n          return;\n\n        var dir = e.clientX - startX < 0 ? -1 : 1;\n        stage.trySlide(this, dir);\n        startX += dir * 48;\n      };\n\n      var doc = this.dom.ownerDocument;\n      var end = () => {\n        if (e.pointerId !== pointerId)\n          return;\n\n        doc.removeEventListener('pointermove', move, true);\n        doc.removeEventListener('pointerup', end, true);\n      };\n\n      doc.addEventListener('pointermove', move, true);\n      doc.addEventListener('pointerup', end, true);\n      e.preventDefault();\n    });\n  }\n\n  cellCoords() {\n    return this.cells.map((cell) => [this.x + cell.x, this.y + cell.y]);\n  }\n\n  slide(dir, cb) {\n    var end = () => {\n      this.dom.style[animation] = '';\n      this.dom.removeEventListener(animationEnd, end);\n      cb();\n    };\n    this.dom.addEventListener(animationEnd, end);\n    this.dom.style[animation] = '300ms ease-out';\n    if (dir == 1)\n      this.dom.style[animationName] = 'slideRight';\n    else\n      this.dom.style[animationName] = 'slideLeft';\n  }\n\n  updatePosition(x, y) {\n    this.x = x;\n    this.y = y;\n    moveToCell(this.dom, this.x, this.y);\n  }\n\n  merge(other) {\n    // Reposition other's cells as children of this jelly.\n    var dx = other.x - this.x;\n    var dy = other.y - this.y;\n    for (var cell of other.cells) {\n      this.cells.push(cell);\n      cell.x += dx;\n      cell.y += dy;\n      moveToCell(cell.dom, cell.x, cell.y);\n      this.dom.appendChild(cell.dom);\n    }\n\n    // Delete references from/to other.\n    other.cells = null;\n    other.dom.parentNode.removeChild(other.dom);\n\n    // Remove internal borders.\n    for (var cell of this.cells) {\n      for (var othercell of this.cells) {\n        if (othercell == cell)\n          continue;\n        if (othercell.x == cell.x + 1 && othercell.y == cell.y)\n          cell.dom.style.borderRight = 'none';\n        else if (othercell.x == cell.x - 1 && othercell.y == cell.y)\n          cell.dom.style.borderLeft = 'none';\n        else if (othercell.x == cell.x && othercell.y == cell.y + 1)\n          cell.dom.style.borderBottom = 'none';\n        else if (othercell.x == cell.x && othercell.y == cell.y - 1)\n          cell.dom.style.borderTop = 'none';\n      }\n    }\n\n    this.isFixed = this.isFixed || other.isFixed;\n  }\n\n  addLock() {\n    var lock = document.createElement('div');\n    this.cells[0].dom.appendChild(lock);\n    var stage = this.stage;\n    var lockDir = 'above';\n    if (stage.isWallAt(this.x, this.y - 1))\n      lockDir = 'above';\n    else if (stage.isWallAt(this.x, this.y + 1))\n      lockDir = 'below';\n    else if (stage.isWallAt(this.x - 1, this.y))\n      lockDir = 'left';\n    else\n      lockDir = 'right';\n\n    lock.className = `lock ${lockDir}`;\n  }\n}\n\nvar stage = null;  // Safari bug. Needs assignment to shadow element with ID.\n\nfunction loadLevel() {\n  var level = +location.hash.slice(1) || 0;\n  if (!stage)\n    stage = new Stage(document.getElementById('map'), levels[level]);\n  else\n    stage.loadMap(levels[level]);\n\n  levelPicker.value = level;\n}\n\nvar levelPicker = document.getElementById('level');\nlevelPicker.addEventListener('change', () => {\n  location.hash = levelPicker.value;\n});\nfor (var i = 0; i < levels.length; i++) {\n  var option = new Option(`Level ${i + 1}`, i);\n  levelPicker.appendChild(option);\n}\n\n\nloadLevel();\n\nstage.onDoneChange = () => {\n  document.getElementById('done').style.display = stage.done ? 'block' : '';\n}\n\ndocument.getElementById('undo').onclick = () => stage.undo();\ndocument.getElementById('reset').onclick = () => stage.reset();\n\nwindow.addEventListener('hashchange', loadLevel);\n"]}